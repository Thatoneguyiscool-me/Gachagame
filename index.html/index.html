<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JJ's Casino Gacha Game</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    margin-bottom: 10px;
    color: #ff79c6;
  }
  .container {
    background: #222;
    padding: 20px;
    border-radius: 10px;
    width: 320px;
    box-shadow: 0 0 10px #ff79c6;
  }
  .slots {
    display: flex;
    justify-content: center;
    margin: 15px 0;
    font-size: 40px;
    letter-spacing: 20px;
    font-weight: bold;
    user-select: none;
  }
  button {
    background: #ff79c6;
    border: none;
    color: #222;
    font-weight: bold;
    font-size: 16px;
    padding: 10px 15px;
    margin: 5px 3px;
    border-radius: 6px;
    cursor: pointer;
    width: 120px;
    transition: background 0.3s ease;
  }
  button:disabled {
    background: #555;
    cursor: not-allowed;
  }
  #rollHistory {
    background: #333;
    padding: 10px;
    height: 120px;
    overflow-y: auto;
    border-radius: 6px;
    font-size: 14px;
    margin-top: 10px;
  }
  .status {
    margin: 10px 0;
    font-size: 16px;
    text-align: center;
  }
  #message {
    margin: 10px 0;
    min-height: 24px;
    color: #ffb86c;
    font-weight: bold;
    text-align: center;
  }
  #charactersList {
    margin-top: 10px;
    font-size: 14px;
    max-height: 80px;
    overflow-y: auto;
    background: #2a2a2a;
    padding: 8px;
    border-radius: 6px;
  }
  #diceGame {
    margin-top: 20px;
    background: #222;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 8px #50fa7b;
    text-align: center;
  }
  #diceResult {
    font-size: 24px;
    margin: 15px 0;
    user-select: none;
  }
  #store {
    margin-top: 20px;
    background: #222;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 8px #bd93f9;
  }
  #store h3 {
    margin-bottom: 10px;
    color: #bd93f9;
  }
  .store-item {
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h1>JJ's Casino Gacha Game</h1>

<div class="container" id="gachaContainer">
  <div class="slots" id="slots">- - -</div>
  <div style="text-align:center;">
    <button id="rollBtn">Roll ($20)</button>
    <button id="multiRollBtn">10x Roll ($200)</button>
  </div>
  <div class="status">
    <div>Cash: $<span id="cash">1000.00</span></div>
    <div>Level: <span id="level">1</span> | XP: <span id="xp">0</span>/100</div>
    <div>Buffs (Anime Characters): <span id="buffCount">0</span> (+0%)</div>
  </div>
  <div id="message"></div>
  <div id="rollHistory"></div>

  <div id="charactersList" title="Unlocked Characters (buffs)">Unlocked Characters: None</div>
</div>

<div id="diceGame" class="container">
  <h2>Dice Mini Game</h2>
  <button id="diceBtn">Play Dice ($10)</button>
  <div id="diceResult">Roll a dice!</div>
</div>

<div id="store" class="container">
  <h3>Store</h3>
  <div class="store-item">
    <button id="buyXPBoostBtn">Buy XP Boost (+50 XP) - $100</button>
  </div>
  <div class="store-item">
    <button id="buyCashBonusBtn">Buy Cash Bonus (+$100) - $150</button>
  </div>
</div>

<script>
  // Game Variables
  let cash = 1000.0;
  let level = 1;
  let xp = 0;
  let xpToLevel = 100;
  let rollHistory = [];
  const animeCharacters = [
    {name: 'Sakura', buff: 0.1},
    {name: 'Kaito', buff: 0.1},
    {name: 'Miyu', buff: 0.1},
    {name: 'Ren', buff: 0.1},
    {name: 'Akira', buff: 0.1},
  ];
  let unlockedCharacters = [];

  // Costs
  const rollCost = 20;
  const diceCost = 10;

  // Elements
  const slotsEl = document.getElementById('slots');
  const rollBtn = document.getElementById('rollBtn');
  const multiRollBtn = document.getElementById('multiRollBtn');
  const cashEl = document.getElementById('cash');
  const levelEl = document.getElementById('level');
  const xpEl = document.getElementById('xp');
  const buffCountEl = document.getElementById('buffCount');
  const rollHistoryEl = document.getElementById('rollHistory');
  const messageEl = document.getElementById('message');
  const charactersListEl = document.getElementById('charactersList');
  const diceBtn = document.getElementById('diceBtn');
  const diceResult = document.getElementById('diceResult');
  const buyXPBoostBtn = document.getElementById('buyXPBoostBtn');
  const buyCashBonusBtn = document.getElementById('buyCashBonusBtn');

  // Utility Functions
  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function updateDisplays() {
    cashEl.textContent = cash.toFixed(2);
    levelEl.textContent = level;
    xpEl.textContent = `${xp}/${xpToLevel}`;

    buffCountEl.textContent = unlockedCharacters.length;
    buffCountEl.textContent += ` (+${(unlockedCharacters.length * 10)}%)`;

    updateButtons();
  }

  function updateButtons() {
    rollBtn.disabled = cash < rollCost;
    multiRollBtn.disabled = cash < rollCost * 10;
    diceBtn.disabled = cash < diceCost;
    buyXPBoostBtn.disabled = cash < 100;
    buyCashBonusBtn.disabled = cash < 150;
  }

  function displayMessage(msg) {
    messageEl.textContent = msg;
  }

  function updateSlots(nums) {
    slotsEl.textContent = nums.join(' ');
  }

  function addXP(amount) {
    xp += amount;
    if (xp >= xpToLevel) {
      xp -= xpToLevel;
      level++;
      displayMessage(`Level Up! You reached level ${level}!`);
    }
  }

  function getTotalBuffMultiplier() {
    // Buffs from anime characters + level multiplier
    let characterBuff = unlockedCharacters.length * 0.1; // 10% per char
    let levelBuff = level * 0.1; // 10% per level
    return (1 + characterBuff) * (1 + levelBuff);
  }

  function unlockCharacterRandom() {
    // If all unlocked, do nothing
    if (unlockedCharacters.length >= animeCharacters.length) return;
    // Pick random locked character
    let locked = animeCharacters.filter(c => !unlockedCharacters.includes(c));
    if (locked.length === 0) return;
    let choice = locked[getRandomInt(0, locked.length - 1)];
    unlockedCharacters.push(choice);
    updateCharactersList();
    displayMessage(`You unlocked ${choice.name}! Buff +10% cash earnings.`);
  }

  function updateCharactersList() {
    if (unlockedCharacters.length === 0) {
      charactersListEl.textContent = 'Unlocked Characters: None';
    } else {
      charactersListEl.textContent = 'Unlocked Characters: ' + unlockedCharacters.map(c => c.name).join(', ');
    }
  }

  // Game Functions
  function rollGacha() {
    if (cash < rollCost) {
      displayMessage(`Not enough cash to roll! Need $${rollCost}`);
      return;
    }
    cash -= rollCost;

    const nums = [getRandomInt(1,9), getRandomInt(1,9), getRandomInt(1,9)];
    updateSlots(nums);
    rollHistory.push(nums.join(' '));
    if (rollHistory.length > 10) rollHistory.shift();

    const baseCash = 10;
    const totalMultiplier = getTotalBuffMultiplier();
    const earned = baseCash * totalMultiplier;
    cash += earned;

    addXP(10);

    if (nums[0] === nums[1] && nums[1] === nums[2]) {
      unlockCharacterRandom();
    }

    updateDisplays();
    updateRollHistory();
    displayMessage(`Rolled and spent $${rollCost}. Earned $${earned.toFixed(2)} from the roll!`);
  }

  function multiRoll(count = 10) {
    const totalCost = rollCost * count;
    if (cash < totalCost) {
      displayMessage(`Not enough cash for ${count} rolls! Need $${totalCost}`);
      return;
    }
    cash -= totalCost;

    for (let i = 0; i < count; i++) {
      const nums = [getRandomInt(1,9), getRandomInt(1,9), getRandomInt(1,9)];
      updateSlots(nums);
      rollHistory.push(nums.join(' '));
      if (rollHistory.length > 10) rollHistory.shift();

      const baseCash = 10;
      const totalMultiplier = getTotalBuffMultiplier();
      const earned = baseCash * totalMultiplier;
      cash += earned;

      addXP(10);

      if (nums[0] === nums[1] && nums[1] === nums[2]) {
        unlockCharacterRandom();
      }
    }

    updateDisplays();
    updateRollHistory();
    displayMessage(`Completed ${count} rolls, spent $${totalCost}!`);
  }

  function updateRollHistory() {
    rollHistoryEl.innerHTML = rollHistory.map(r => `Rolled: ${r}`).reverse().join('<br>');
  }

  function playDice() {
    if (cash < diceCost) {
      displayMessage(`Not enough cash to play dice! Need $${diceCost}`);
      return;
    }
    cash -= diceCost;

    const roll = getRandomInt(1, 6);
    diceResult.textContent = `Dice rolled: ${roll}`;
    let earned = 0;

    switch (roll) {
      case 6: earned = 50; break;
      case 5: earned = 20; break;
      case 4: earned = 15; break;
      case 3: earned = 10; break;
      case 2: earned = 5; break;
      case 1: earned = 1; break;
    }

    const totalMultiplier = getTotalBuffMultiplier();
    earned *= totalMultiplier;
    cash += earned;

    updateDisplays();
    displayMessage(`Spent $${diceCost} to play dice. You earned $${earned.toFixed(2)}!`);
  }

  // Store Functions
  buyXPBoostBtn.addEventListener('click', () => {
    if (cash < 100) {
      displayMessage('Not enough cash to buy XP Boost!');
      return;
    }
    cash -= 100;
    addXP(50);
    updateDisplays();
    displayMessage('Bought XP Boost (+50 XP)!');
  });

  buyCashBonusBtn.addEventListener('click', () => {
    if (cash < 150) {
      displayMessage('Not enough cash to buy Cash Bonus!');
      return;
    }
    cash -= 150;
    cash += 100; // instant cash bonus
    updateDisplays();
    displayMessage('Bought Cash Bonus (+$100)!');
  });

  // Event Listeners
  rollBtn.addEventListener('click', rollGacha);
  multiRollBtn.addEventListener('click', () => multiRoll(10));
  diceBtn.addEventListener('click', playDice);

  // Initialize
  updateDisplays();
  updateRollHistory();
  updateCharactersList();

  <audio id="backgroundMusic" src="music.mp3" autoplay loop></audio>

</script>

</body>
</html>
